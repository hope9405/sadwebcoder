rest API 와 graphQL의 비교
===

# 1. 서론
 본 문에서는 Server API를 만드는 방식 중 자주 비교되는 rest API와 graphQL에 대해서 알아보고자 한다. 글의 내용은 처음 개발을 위해 어떤 것을 선택해야하는지에 대해 정할 수 있도록 하는 것에 초점을 두어 각 방식이 대략적으로 어떻게 동작하는지와 그에 따른 장단점에 대해서 서술하고 있으므로 깊이 있는 내용은 다음에 다루도록 하겠다. 
 
# 2. rest API
## 2-1. rest API이란?
 rest란 "Representational State Transfer"의 약자로 자원의 표현에 의한 상태 전달을 의미한다. 여기서 자원은 서비스에서 사용되는 정보들을 말하며 표현은 그 정보의 이름, 상태는 그 정보가 현재 어떤 값을 가지고 있는지를 말한다.   
정리하면

 * 자원 -> 정보 (ex: 해당 서비스에서 사용되는 데이터, 그림, 소리 등 관리하는 모든 것들을 말한다.)
 * 표현 -> 이름 (ex: 게시글의 정보를 'post'라는 이름으로 사용된다면 이를 자원의 표현이라고 한다.)
 * 상태 -> 정보 (ex: 현재 'post'라는 자원이 가지고 있는 값.)      
   
이는 단순히 이해를 쉽게하기 위한거지 정확한 표현은 아니다. 하지만 본 문에서는 이렇게만 이해해도 문제가 없을 것이다.   
계속 설명하자면 rest API라는 것은 HTTP URL을 통해 자원을 명시하고 HTTP Method(POST, GET, PUT, DELETE)를 통해 전달하는 방식을 의미한다. 모든 자원에 고유한 URL을 부여하고 Method 형식에 따라 각각의 다른 동작을 수행 할 수 있다. 밑에는 보통 Method 형식에 따라 수행하는 동작들이다. 

* POST : 생성
* GET : 조회
* PUT : 수정
* DELETE : 삭제   
   
예를 들어서 게시글에 대한 서비스를 만든다고 가정한다면 게시글에 대한 자원을 post로 지정했다고 하자. 이 URL을
<pre>
test/post
</pre>
라고 가정하자. 이 URL은 endpoint라고도 한다.   
클라이언트에서 POST Method로 제목, 내용, userID를 포함하여 URL에 요청을 보낸다면 서버에서는 DB에 이를 등록하고 postID를 생성할 것이다. 이번에는 PUT Method로 postID를 포함하여 요청을 보낸다면 서버에서는 받은 자원에 받게 데이터를 수정할 것이다. 이런 식으로 같은 URL이더라도 Method에 따라서 다르게 기능을 수행할 수 있다. 만약 DELETE Method로 postID를 같이 보낸다면 서버는 DB에서 이 postID를 찾아서 삭제할 것이다.   
이런 식으로 rest API는 URL과 Method만으로 기능을 수행할 수 있다.

## 2-2. rest API 장단점
그렇다면 rest API를 사용함으로써 얻는 장단점들은 무엇이 있을까?

### 장점

* URL을 통해 어떤 기능을 수행하는지 유추가 가능해 쉽게 사용이 가능하다. 
* HTTP 프로토콜을 따르는 모든 플랫폼에서 호환된다. (높은 범용성)
* 자원을 갖는 서버와 자원을 요청하는 클라이언트로 명확히 분리된다.

### 단점

* 사용 가능한 메소드가 4가지 밖에 없다.
* 표준이 존재하지 않는다.
* 정해진 요청에 정해진 응답밖에 할 수 없다. 
* 요청의 종류가 많아질수록 그만큼 URL도 많아진다.   

 rest API는 쉬운 사용과 웹에 최적화되어 있지만 그만큼 메소드가 제한적이고 표준이 정해지지 않아서 관리가 어렵다고 할 수 있다. 또한 정해진 응답 밖에 할 수 없기 때문에 필요한 정보 이외의 정보도 같이 가져오기 때문에 overfetching이 일어 날 수 있고 필요한 정보가 하나의 endpoint로 해결되지 않아 다수의 endpoint를 호출할 수도 있는 underfetching도 일어 날 수 있다.
* overfetching : 불필요한 데이터를 가져오는 것.
* underfetching : 하나의 endpoint로 해결되지 않아 다수의 endpoint를 호출하는 것.

# 3. graphQL
## 3-1. graphQL이란?
graphQL은 "Graph Query Language"의 약자로 Server API를 만들기 위해 Facebook에서 만든 Query Language를 말한다. graphQL이 나오게 된 배경으로 기존의 rest API가 갖는 문제점들을 해결하기 위해서이다.
* 다양한 기기에서 필요한 정보들을 REST로 일일히 구현이 어려움.
* 각 기기마다 UI/UX가 다르기에 Server에서 일일히 대응이 어려움.   

이런 문제점들이 있기 때문에 개발되었다. 그렇다면 다음은 어떤 방식인지 알아보자.   
graphQL의 개념은 클라이언트가 필요한 데이터만 요청할 수 있다는 것이다. rest API와는 달리 응답이 정해져있지 않기 때문에 다양한 요청에 다양한 응답을 할 수 있다. 이로 인해서 기본적으로 요청을 받는 하나의 endpoint만 사용한다.   
예를 들어 클라이언트 쪽에서 게시글의 제목을 알고 싶다고 가정하자. rest API에서는 게시글의 제목 이외에도 내용, 작성자, 작성일자 등이 함께 보내질 수 있다. 이는 곧 리소스의 낭비가 된다. 그러나 graphQL에서는 제목 하나만을 요청해 받는게 가능하다. rest API에서는 자원의 종류에 따라서 요청 횟수가 증가하지만 그러한 단점을 극복하여 하나의 요청으로 처리가 가능해진 것이다. 또한 하나의 endpoint를 사용하기 때문에 underfetching이 발생하지 않고 원하는 정보만 받기 때문에 overfetching또한 발생하지 않는다.

## 3-2. graphQL 장단점
그렇다면 graphQL을 사용함으로써 얻는 장단점들은 무엇이 있을까?   

### 장점

* HTTP의 요청 횟수를 줄일 수 있으며 원하는 정보만 가져오기 때문에 응답 size를 줄일 수 있다. 즉, overfetching과 underfetching이 발생하지 않는다.
* 완성 이후에 추가적인 비용이 rest API보다 낮다.
* rest API보다 훨씬 빠른 개발이 가능하다.

### 단점

* File 전송 등 text만으로는 하기 힘든 내용은 처리가 복잡하다.
* 요청과 응답이 정해진 서비스에서는 rest API보다 비효율적이다.
* 재귀적인 요청이 불가능하다.
* 클라이언트 측에서 요청을 생성해야 되므로 러닝 커브(학습 시간)이 발생한다. 이로 인해 Front-end 개발자에게  부담이 발생할 수 있다. (그러나 Front-end 개발자가 학습이 되었다면 오히려 더 나은 개발환경을 제공한다.)   

 graphQL은 불필요한 리소스 낭비를 줄일 수 있고 개발시간도 훨씬 단축시킬 수 있다. 그러나 러닝커브로 인해 오히려 시간이 더 들어 갈 수도 있고, 정해진 요청과 응답만이 필요한 경우에는 오히려 rest API보다 비효율적인 경우도 존재한다.

# 4. rest API vs graphQL

# 5. 마무리
